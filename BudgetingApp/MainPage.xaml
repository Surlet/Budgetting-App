<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="BudgetingApp.MainPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:vm="clr-namespace:BudgetingApp.ViewModels"
    xmlns:input="clr-namespace:InputKit.Shared.Controls;assembly=InputKit.Maui">

    <ContentPage.BindingContext>
        <vm:FormViewModel />
    </ContentPage.BindingContext>
    <Grid
        Padding="15"
        ColumnDefinitions="Auto, Auto"
        ColumnSpacing="15"
        HorizontalOptions="Center"
        RowDefinitions="Auto, Auto, Auto, Auto, Auto, *"
        RowSpacing="15"
        VerticalOptions="Center">

        <!--  Form  -->
        <!--  Title  -->
        <Label
            x:Name="TitleLabel"
            Grid.Row="0"
            Grid.ColumnSpan="2"
            FontSize="32"
            Text="Add your expense" />

        <!--  Enter Store Name  -->
        <Label
            x:Name="StoreNameLabel"
            Grid.Row="1"
            Grid.Column="0"
            Text="Store Name"
            VerticalTextAlignment="Center" />

        <Entry
            x:Name="StoreNameEntry"
            Grid.Row="1"
            Grid.Column="1"
            WidthRequest="300"
            Text="{Binding StoreNameEntry}"/>

        <!--  Enter Category  -->
        <Label
            x:Name="CategoryLabel"
            Grid.Row="2"
            Grid.Column="0"
            Text="Category"
            VerticalTextAlignment="Center" />


        <Picker
            x:Name="CategoryPicker"
            Grid.Row="2"
            Grid.Column="1"
            WidthRequest="300"
            SelectedItem="{Binding CategoryEntry}"/>

        <!--  Enter Price  -->
        <Label
            x:Name="PriceLabel"
            Grid.Row="3"
            Grid.Column="0"
            Text="Price"
            VerticalTextAlignment="Center" />

        <Entry
            x:Name="PriceEntry"
            Grid.Row="3"
            Grid.Column="1"
            Keyboard="Numeric"
            WidthRequest="300"
            Text="{Binding AmountEntry}"/>

        <!--  Submit Button  -->
        <Button
            x:Name="SubmitButton"
            Grid.Row="4"
            Grid.ColumnSpan="2"
            Command="{Binding AddExpenseCommand}"
            Text="Submit" />

        <!--  Outcome  -->
        <CollectionView ItemsSource="{Binding ExpensesCollection}" Grid.Row="5" Grid.ColumnSpan="2">
            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <Grid RowDefinitions="*,*" ColumnDefinitions="3*,*">
                        <Label Text="{Binding StoreName}" />
                        <Label Grid.Column="1" Text="{Binding Category}" />
                        <Label Grid.Row="1" Text="{Binding Amount}" />
                    </Grid>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>

    </Grid>

</ContentPage>
